✅ ADK 组件导入成功。
✅ 已从 .env 文件加载 API key
✅ 已定义辅助函数。

================================================================================
第 2 节：带有 InMemorySessionService 的有状态智能体
================================================================================
✅ 有状态智能体已初始化！
   - 应用程序：default
   - 用户：default
   - 使用：InMemorySessionService

 ### 会话：stateful-agentic-session

用户 > 嗨，我是 Sam！美国的首都是什么？
gemini-2.5-flash-lite >  嗨 Sam！美国的首都是华盛顿特区。

用户 > 你好！我的名字是什么？
gemini-2.5-flash-lite >  你告诉我你的名字是 Sam。

================================================================================
第 3 节：带有 DatabaseSessionService 的持久化会话
================================================================================
✅ 已升级到持久化会话！
   - 数据库：my_agent_data.db
   - 会话将在重启后继续存在！

 ### 会话：test-db-session-01

用户 > 嗨，我是 Sam！美国的首都是什么？
gemini-2.5-flash-lite >  你好 Sam！美国的首都是华盛顿特区。

用户 > 你好！我的名字是什么？
gemini-2.5-flash-lite >  你的名字是 Sam。

--- 数据库内容 ---
['app_name', 'session_id', 'author', 'content']
('default', 'test-db-session-01', 'user', '{"parts": [{"text": "Hi, I am Sam! What is is capital of United States?"}], "role": "user"}')
('default', 'test-db-session-01', 'text_chat_bot', '{"parts": [{"text": "Hello Sam! The capital of United States is Washington, D.C."}], "role": "model"}')
('default', 'test-db-session-01', 'user', '{"parts": [{"text": "Hello! What is my name?"}], "role": "user"}')
('default', 'test-db-session-01', 'text_chat_bot', '{"parts": [{"text": "Your name is Sam."}], "role": "model"}')

================================================================================
第 4 节：上下文压缩
================================================================================
/Users/benogren/Desktop/projects/AI-Agents-Intensive-Course/Day-3/day_3a_agent_sessions.py:215: UserWarning: [实验性] EventsCompactionConfig：此功能是实验性的，可能会在未来版本中更改或移除，恕不另行通知。它可能随时引入重大更改。
  events_compaction_config=EventsCompactionConfig(
✅ 研究应用已升级事件压缩！

 ### 会话：compaction_demo

用户 > 医疗保健领域 AI 的最新新闻是什么？
gemini-2.5-flash-lite >  我可以为您提供医疗保健领域 AI 最新发展的摘要。但是，请记住，"最新"新闻可能会非常快地变化。要获取绝对最新的信息，我建议您查看信誉良好的技术和医疗保健新闻来源。

以下是医疗保健领域 AI 的一些关键趋势和最新发展：

**1. 诊断和成像方面的进步：**

*   **提高准确性：** AI 算法在分析医学图像（X 光、CT 扫描、MRI、病理切片）以检测癌症、糖尿病视网膜病变和心血管疾病等疾病方面变得越来越复杂，其准确性和早期发现能力往往超过人类单独的解释。
*   **更快的分析：** AI 可以显著加快大量图像的审查，帮助放射科医生和病理学家优先处理关键病例并减少周转时间。
*   **新应用：** 研究正在扩展使用 AI 诊断罕见疾病或识别人眼可能错过的细微模式。

**2. 药物发现和开发：**

*   **加速研究：** AI 被用于识别潜在的药物靶点、预测候选药物的功效并优化临床试验设计，大大缩短了将新治疗方法推向市场的时间和成本。
*   **个性化医疗：** AI 可以分析大量患者基因组、生活方式和治疗反应数据集，以确定对个体患者最有效的治疗方法。

**3. 预测分析和早期干预：**

*   **疾病爆发预测：** AI 模型可以分析公共卫生数据、社交媒体趋势和旅行模式，以预测和追踪传染病的传播。
*   **患者风险分层：** AI 可以识别患某些疾病（例如，脓毒症、心力衰竭、再入院）风险较高的患者，从而允许主动干预和个性化护理计划。
*   **早期预警系统：** 医院中由 AI 驱动的系统可以监测患者生命体征和其他数据，以提供病情恶化的早期预警。

**4. 机器人手术和医疗设备：**

*   **增强精度：** AI 正在集成到机器人手术系统中，为外科医生在复杂手术过程中提供更高的精度、灵活性和控制力。
*   **辅助决策：** AI 可以在手术过程中为外科医生提供实时指导和建议。
*   **智能医疗设备：** 由 AI 驱动的可穿戴设备和植入式传感器可以持续监测患者健康状况，检测异常情况并提醒医疗保健提供者。

**5. 管理和运营效率：**

*   **简化工作流程：** AI 正在自动化诸如排程、计费和医疗记录管理等管理任务，使医疗保健专业人员能够专注于患者护理。
*   **优化资源分配：** AI 可以帮助医院更有效地管理资源，预测患者流量和人员需求。
*   **虚拟助手和聊天机器人：** 由 AI 驱动的聊天机器人被用于患者参与、回答常见问题、预约预约和提供初步症状检查。

**6. 挑战和伦理考虑：**

尽管进展迅速，但仍存在持续的挑战和重要的伦理考虑：

*   **数据隐私和安全：** 保护敏感的患者数据至关重要。
*   **AI 算法中的偏见：** 确保 AI 模型公平且不会加剧现有的医疗保健差异至关重要。
*   **监管批准：** 导航由 AI 驱动的医疗设备和软件的复杂监管环境至关重要。
*   **临床医生采用和信任：** 建立信任并确保医疗保健专业人员接受充分培训以有效使用 AI 工具。
*   **可解释性和透明度：** 了解 AI 模型如何得出其结论对于临床决策很重要。

**要获取最新信息，我建议您查看以下来源：**

*   **主要科技新闻媒体：** TechCrunch、The Verge、Wired、Ars Technica
*   **医疗保健特定新闻：** FierceHealthcare、STAT News、MedCity News
*   **信誉良好的医学期刊：** JAMA、The Lancet、Nature Medicine（经常发表开创性研究）
*   **拥有强大科学/技术版块的主要新闻机构：** The New York Times、The Wall Street Journal、BBC News

您对医疗保健领域 AI 的某个特定领域最感兴趣了解更多吗？例如，您对癌症检测中的 AI、药物开发或其他方面感到好奇吗？

 ### 会话：compaction_demo

用户 > 药物发现方面有什么新的发展吗？
gemini-2.5-flash-lite >  是的，在 AI 驱动的药物发现方面有**非常重大和持续的发展**。这是 AI 正在改变医疗保健的最具影响力的领域之一。以下是新的和令人兴奋的内容的细分：

**1. 加速靶点识别：**

*   **基因组和蛋白质组学分析：** AI 在分析来自基因组学、转录组学、蛋白质组学和代谢组学的海量数据集方面表现出色。它可以识别以前未知或对于传统分析过于复杂的新致病基因、蛋白质或通路。这有助于确定新药物的最有希望的靶点。
*   **文献挖掘和知识图谱：** 高级自然语言处理（NLP）模型可以"阅读"并综合来自数百万篇科学论文、专利和临床试验报告的信息。这有助于研究人员比人工审查更快地发现隐藏的联系并识别潜在的靶点。

**2. 新颖分子设计和生成：**

*   **生成式 AI 模型：** 这是一个主要的发展领域。诸如变分自编码器（VAE）和生成对抗网络（GAN）等模型被用于设计具有所需特性的全新分子结构（例如，对靶点的高结合亲和力、良好的溶解度、低毒性）。
*   **从头设计：** AI 可以创建"从头开始"的分子，这些分子以前从未存在过，从而可能带来更具创新性和有效的治疗方法，而不是筛选现有的库。

**3. 改进的候选药物筛选和优化：**

*   **预测建模：** AI 可以预测潜在药物分子与其靶点的结合程度、其吸收、分布、代谢、排泄和毒性（ADMET）特性，甚至其潜在的副作用。这大大减少了需要在实验室合成和测试的分子数量。
*   **虚拟筛选：** AI 算法可以针对疾病靶点快速筛选大量虚拟化合物库，识别有希望的候选者以供进一步研究。
*   **多目标优化：** AI 可以同时针对多个特性优化候选药物，例如功效、安全性和可制造性。

**4. 革命性临床试验：**

*   **患者分层：** AI 可以分析患者数据以识别最有可能对特定药物做出反应的亚组。这导致更高效和成功的临床试验。
*   **预测试验成功：** 正在开发 AI 模型以预测临床试验成功的可能性，帮助公司做出更好的投资决策。
*   **设计更高效的试验：** AI 可以帮助优化试验方案、选择适当的终点并识别合适的试验地点。

**5. 重新利用现有药物：**

*   **寻找新用途：** AI 可以分析药物数据库和患者数据，以识别可能对治疗不同疾病有效的现有药物。这是新疗法的更快且通常成本更低的途径。

**主要参与者和最新趋势：**

*   **AI 原生药物发现公司：** 一大批初创公司（例如，Recursion Pharmaceuticals、Exscientia、Atomwise、BenevolentAI）从一开始就将 AI 作为其核心建立。许多公司正在与成熟的制药巨头建立合作伙伴关系。
*   **大型制药公司拥抱 AI：** 主要制药公司正在大力投资 AI 能力，要么通过建立自己的团队，要么与 AI 专家合作。
*   **专注于特定疾病：** 虽然 AI 广泛适用，但强烈关注将其用于具有挑战性的领域，如神经退行性疾病（阿尔茨海默病、帕金森病）、罕见疾病和肿瘤学。
*   **"主动学习"和"强化学习"的兴起：** 这些 AI 技术允许模型从实验结果中迭代学习，不断改进其预测和分子设计。

**挑战仍然存在：**

*   **实验验证：** AI 预测仍然需要在实验室和临床试验中进行严格的实验验证。
*   **数据质量和标准化：** AI 模型的准确性在很大程度上依赖于高质量、注释良好的数据。
*   **监管途径：** 虽然正在取得进展，但 AI 发现药物的明确监管途径仍在发展中。
*   **"黑盒"问题：** 了解 AI 模型*为什么*做出特定预测仍然具有挑战性，这对于科学严谨性和监管审查很重要。

总之，AI 在药物发现中不再只是一个流行词；它正成为一个不可或缺的工具，从根本上改变了新药物的发现、设计和开发方式。这里的创新速度令人难以置信。

 ### 会话：compaction_demo

用户 > 告诉我更多关于你发现的第二个发展。
gemini-2.5-flash-lite >  你在询问我在之前的回答中提到的**第二个发展**，即：

**2. 新颖分子设计和生成**

这是 AI 在药物发现中真正突破性的一方面。AI 不仅仅是*发现*可能*起作用的现有分子，它现在正在主动**创建具有特定、所需特性的全新分子结构**。

以下是深入了解其工作原理及其如此重要的原因：

**工作原理：生成式 AI 的力量**

这背后的核心技术是**生成式 AI**。可以这样想：

*   **传统机器学习：** 通常专注于预测（例如，预测分子是否会与靶点结合）。
*   **生成式 AI：** 专注于创造（例如，创建一个*将*与靶点结合的*新*分子）。

几种类型的生成式 AI 模型特别相关：

*   **变分自编码器（VAE）：** 这些模型学习现有分子的压缩"表示"（一种蓝图）。然后，它们可以"解码"此表示以生成与它们所学到的相似但仍然是新颖的分子。
*   **生成对抗网络（GAN）：** GAN 由两个神经网络组成：一个"生成器"，它创建新分子，和一个"判别器"，它试图区分真实分子和生成的分子。通过这种对抗过程，生成器在创建高度逼真和新颖的分子方面变得越来越好。
*   **强化学习（RL）智能体：** 这些智能体可以被训练为"探索"巨大的化学空间，并学习生成满足特定"奖励"的分子，例如高结合亲和力、良好的药物相似性或低毒性。

**关键能力和结果：**

*   **从头设计（"从零开始"）：** 这是最革命性的方面。AI 不仅仅是调整现有的药物结构；它可以从头开始设计分子，探索人类化学家可能无法想象的化学可能性。
*   **靶向特性优化：** 研究人员可以指定他们希望在新药物分子中拥有的特性。例如，他们可能会要求 AI 设计一个具有以下特性的分子：
    *   **与特定蛋白质靶点紧密结合**（高亲和力）。
    *   **具有良好的"药物相似性"**：这包括溶解度、跨细胞膜的渗透性和稳定性等因素。
    *   **最小化毒性**：预测并避免常见的毒性副作用。
    *   **具有特定的"药代动力学"特征**：药物在体内被吸收、分布、代谢和排泄的方式。
*   **导航巨大的化学空间：** 可能的分子数量极其庞大（估计超过宇宙中的原子数量）。AI 可以有效地搜索和导航这个"化学空间"以找到有希望的候选者，这是手动无法做到的。
*   **加速设计周期：** 传统上，设计和优化候选药物可能需要数年时间。AI 可以将此过程压缩到数月甚至数周。

**为什么这如此重要？**

*   **解锁新颖疗法：** 它允许发现全新的药物类别，可以解决目前无法治疗或治疗不佳的疾病。
*   **解决"不可成药"靶点：** 某些疾病靶点用传统方法进行药物开发是出了名的困难。AI 设计新颖化学结构的能力可能克服这些挑战。
*   **更快、更便宜的药物开发：** 通过从一开始就创建更好的候选药物，AI 可以减少失败的实验和临床试验数量，节省大量时间和资源。

**示例场景：**

想象一下，研究人员正试图找到一种药物来抑制新发现的致癌酶。他们可以不用筛选数百万种现有化合物，而是使用 AI 生成模型。他们告诉 AI："为我设计一个与酶 X 的活性位点紧密结合、在水中可溶且不与已知脱靶蛋白质相互作用的分子。"然后，AI 生成符合这些标准的新颖候选分子列表，准备好进行合成和测试。

AI 不仅分析而且还*创建*新颖化学实体的能力是一种范式转变，为寻找救命药物开辟了新的前沿。

 ### 会话：compaction_demo

用户 > 参与其中的主要公司是谁？
gemini-2.5-flash-lite >  你在询问参与 AI 在药物发现中的**新颖分子设计和生成**方面的公司。这是一个动态的空间，重要的是要区分：

1.  **AI 原生药物发现公司：** 这些公司是以 AI 为其核心技术成立的，专门用于药物发现。
2.  **成熟的制药公司：** 这些公司越来越多地采用和投资 AI 能力，通常通过合作伙伴关系或内部开发。

以下是一些主要参与者及其方法：

**1. 领先的 AI 原生药物发现公司：**

这些公司处于使用 AI 进行从头分子设计和生成的前沿：

*   **Exscientia：** 该领域的先驱。他们使用 AI 设计具有特定特性的分子，并有几种 AI 设计的药物正在进行临床试验，包括用于癌症和自身免疫性疾病。他们以专注于整个药物发现过程而闻名。
*   **Atomwise：** 专门使用深度学习进行小分子药物发现。他们的 AtomNet® 平台预测小分子与靶点蛋白质的结合程度，有助于设计新化合物。他们经常与制药公司合作。
*   **Recursion Pharmaceuticals：** 虽然他们在药物发现的许多方面使用 AI，但他们在分析大量生物和化学数据集以识别新颖的候选药物并了解疾病机制方面很强，这为他们的分子生成工作提供了支持。
*   **BenevolentAI：** 专注于使用 AI 分析复杂的生物数据并识别新颖的药物靶点。然后，他们利用 AI 进行分子设计和优化，以开发针对一系列疾病的新疗法。
*   **Insilico Medicine：** 以其端到端 AI 平台而闻名，该平台涵盖靶点发现、分子生成和临床试验预测。他们在快速将 AI 设计的药物从发现推进到临床试验方面取得了重要里程碑。
*   **Schrödinger：** 虽然是计算化学领域的长期参与者，但 Schrödinger 已将先进的 AI 和机器学习显著集成到其平台中，增强了其设计和预测新颖分子特性的能力。
*   **Relay Therapeutics：** 专注于了解和靶向蛋白质运动，使用实验和计算方法的组合，包括 AI，来设计调节蛋白质功能的新颖小分子。

**2. 在分子设计方面大量投资 AI 的主要制药公司：**

这些大型制药巨头并不是像原生公司那样从头开始开发 AI，但他们正在将先进的 AI 能力集成到其研发管道中，通常通过合作或建立自己的内部 AI 团队。

*   **Pfizer：** 一直积极与 AI 药物发现公司合作，并投资内部 AI 能力用于靶点识别和分子设计。
*   **Merck (MSD)：** 与 Pfizer 一样，Merck 正在探索 AI 用于药物发现的各个阶段，包括新颖化学实体的生成。
*   **Novartis：** 对数字化转型和 AI 有强烈承诺，他们正在利用这些技术来加速药物设计和发现。
*   **AstraZeneca：** 正在投资 AI 和机器学习以提高其研发生产力，包括在新颖分子生成领域。
*   **Johnson & Johnson：** 有各种专注于 AI 和数据科学的举措，以改善药物发现和开发，包括设计新的候选药物。
